<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Storage Access</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background:#0f1419; color:#e6eef8; font-family:system-ui; min-height:100vh; }
    .container { max-width:1200px; margin:0 auto; padding:20px; }
    h1 { font-size:28px; margin-bottom:10px; color:#fff; }
    .subtitle { color:#aaa; margin-bottom:30px; }
    
    .grid { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:40px; }
    @media(max-width:900px) { .grid { grid-template-columns:1fr; } }
    
    .panel { background:#1a2332; border:1px solid rgba(255,255,255,0.1); border-radius:12px; padding:20px; }
    
    /* Storage Browser */
    .browser-title { font-size:16px; font-weight:600; margin-bottom:15px; color:#fff; }
    .directory-tree { font-family:monospace; font-size:13px; line-height:1.8; }
    .folder { color:#6ea8fe; margin-left:20px; }
    .file { color:#aaa; margin-left:40px; }
    .folder::before { content:"üìÅ "; }
    .file::before { content:"üìÑ "; }
    
    /* Permissions Checklist */
    .permission-group { margin-bottom:15px; }
    .permission-group label { 
      display:flex; align-items:center; padding:10px; background:rgba(255,255,255,0.05); 
      border-radius:6px; cursor:pointer; transition:background 0.2s;
    }
    .permission-group label:hover { background:rgba(255,255,255,0.1); }
    .permission-group input[type="checkbox"] { margin-right:10px; width:18px; height:18px; cursor:pointer; }
    .permission-desc { font-size:12px; color:#888; margin-left:28px; margin-top:4px; }
    
    /* File Metadata */
    .file-item { 
      background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); 
      border-radius:8px; padding:12px; margin-bottom:10px; cursor:pointer;
      transition:background 0.2s;
    }
    .file-item:hover { background:rgba(255,255,255,0.1); }
    .file-name { font-weight:600; color:#fff; font-size:14px; }
    .file-meta { font-size:12px; color:#aaa; margin-top:6px; }
    
    /* Lessons */
    .lessons { margin-top:40px; }
    .lesson { background:#1a2332; border:1px solid rgba(255,255,255,0.1); border-radius:12px; 
      padding:20px; margin-bottom:15px; }
    .lesson-title { font-size:16px; font-weight:600; color:#6ea8fe; margin-bottom:10px; }
    .lesson-content { font-size:13px; line-height:1.6; color:#ddd; }
    .code-block { 
      background:#0f1419; border:1px solid rgba(255,255,255,0.1); border-radius:6px; 
      padding:12px; margin-top:10px; font-family:monospace; font-size:12px; 
      color:#6ea8fe; overflow-x:auto;
    }
    
    .tabs { display:flex; gap:10px; margin-bottom:20px; border-bottom:1px solid rgba(255,255,255,0.1); }
    .tab-btn { 
      padding:10px 15px; background:none; border:none; color:#aaa; cursor:pointer; 
      border-bottom:2px solid transparent; transition:all 0.2s;
    }
    .tab-btn.active { color:#6ea8fe; border-bottom-color:#6ea8fe; }
    .tab-content { display:none; }
    .tab-content.active { display:block; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üì± Storage Access Learning</h1>
    <p class="subtitle">Understanding Android file permissions and storage access</p>
    
    <div class="grid">
      <!-- Storage Browser -->
      <div class="panel">
        <div class="browser-title">Storage Structure</div>
        <div class="directory-tree">
          <div>/storage/</div>
          <div class="folder">DCIM/</div>
          <div class="file">IMG_2024_01.jpg (2.4 MB)</div>
          <div class="file">IMG_2024_02.jpg (3.1 MB)</div>
          <div class="file">VID_2024_01.mp4 (45.2 MB)</div>
          
          <div class="folder">Downloads/</div>
          <div class="file">document.pdf (512 KB)</div>
          <div class="file">image.png (1.2 MB)</div>
          <div class="file">archive.zip (8.5 MB)</div>
          
          <div class="folder">Documents/</div>
          <div class="file">notes.txt (24 KB)</div>
          <div class="file">report.pdf (1.8 MB)</div>
          
          <div class="folder">Music/</div>
          <div class="file">song1.mp3 (4.2 MB)</div>
          <div class="file">song2.mp3 (3.8 MB)</div>
        </div>
      </div>
      
      <!-- Permissions Checklist -->
      <div class="panel">
        <div class="browser-title">Required Permissions</div>
        <div class="permission-group">
          <label>
            <input type="checkbox" disabled>
            <span>READ_EXTERNAL_STORAGE</span>
          </label>
          <div class="permission-desc">Read files from external storage (deprecated in API 33+)</div>
        </div>
        <div class="permission-group">
          <label>
            <input type="checkbox" disabled>
            <span>WRITE_EXTERNAL_STORAGE</span>
          </label>
          <div class="permission-desc">Write files to external storage (deprecated in API 33+)</div>
        </div>
        <div class="permission-group">
          <label>
            <input type="checkbox" disabled>
            <span>ACCESS_MEDIA_LOCATION</span>
          </label>
          <div class="permission-desc">Access precise location metadata in photos/videos</div>
        </div>
        <div class="permission-group">
          <label>
            <input type="checkbox" disabled>
            <span>MANAGE_EXTERNAL_STORAGE</span>
          </label>
          <div class="permission-desc">Manage all files (API 30+, requires special permission)</div>
        </div>
      </div>
    </div>
    
    <!-- File Metadata Examples -->
    <div class="panel" style="margin-bottom:30px;">
      <div class="browser-title">üìÇ File Metadata Display</div>
      <p style="color:#aaa; font-size:13px; margin-bottom:15px;">Example files accessible with proper permissions:</p>
      
      <div class="file-item">
        <div class="file-name">IMG_2024_01.jpg</div>
        <div class="file-meta">
          üìç Size: 2.4 MB | üìÖ Modified: 2024-12-15 | üëÅ Type: Image/JPEG
        </div>
      </div>
      <div class="file-item">
        <div class="file-name">document.pdf</div>
        <div class="file-meta">
          üìç Size: 512 KB | üìÖ Modified: 2024-12-10 | üëÅ Type: Application/PDF
        </div>
      </div>
      <div class="file-item">
        <div class="file-name">notes.txt</div>
        <div class="file-meta">
          üìç Size: 24 KB | üìÖ Modified: 2024-12-20 | üëÅ Type: Text/Plain
        </div>
      </div>
    </div>
    
    <!-- Educational Content -->
    <div class="lessons">
      <h2 style="font-size:20px; margin-bottom:20px; color:#fff;">üìö File Access APIs & Methods</h2>
      
      <div class="tabs">
        <button class="tab-btn active" data-tab="saf">SAF</button>
        <button class="tab-btn" data-tab="mediastore">MediaStore</button>
        <button class="tab-btn" data-tab="scoped">Scoped Storage</button>
      </div>
      
      <!-- SAF Lesson -->
      <div id="saf" class="tab-content active">
        <div class="lesson">
          <div class="lesson-title">Storage Access Framework (SAF)</div>
          <div class="lesson-content">
            <p>The Storage Access Framework (SAF) is a modern approach to file access on Android. It provides a standard interface for accessing files, regardless of their location.</p>
            <p style="margin-top:10px;"><strong>Key Features:</strong></p>
            <ul style="margin-left:20px; margin-top:8px;">
              <li>User-controlled file access</li>
              <li>No need for broad storage permissions</li>
              <li>Supports cloud storage and external drives</li>
              <li>Available on Android 4.4+</li>
            </ul>
            <div class="code-block">
// Open file picker with SAF
Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);
intent.addCategory(Intent.CATEGORY_OPENABLE);
intent.setType("*/*");
startActivityForResult(intent, REQUEST_CODE);

// Access selected file
Uri uri = data.getData();
InputStream input = getContentResolver()
  .openInputStream(uri);
            </div>
          </div>
        </div>
      </div>
      
      <!-- MediaStore Lesson -->
      <div id="mediastore" class="tab-content">
        <div class="lesson">
          <div class="lesson-title">MediaStore API</div>
          <div class="lesson-content">
            <p>MediaStore provides access to media files (images, videos, audio) on the device. It's the recommended way to access media content.</p>
            <p style="margin-top:10px;"><strong>Benefits:</strong></p>
            <ul style="margin-left:20px; margin-top:8px;">
              <li>Optimized for media queries</li>
              <li>Access to EXIF metadata</li>
              <li>Thumbnail generation</li>
              <li>Works with Scoped Storage</li>
            </ul>
            <div class="code-block">
// Query images from MediaStore
ContentResolver resolver = 
  getContentResolver();
Cursor cursor = resolver.query(
  MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
  null, null, null, null
);

while(cursor.moveToNext()) {
  String path = cursor.getString(
    cursor.getColumnIndex(
      MediaStore.Images.Media.DATA
    )
  );
}
            </div>
          </div>
        </div>
      </div>
      
      <!-- Scoped Storage Lesson -->
      <div id="scoped" class="tab-content">
        <div class="lesson">
          <div class="lesson-title">Scoped Storage (Android 11+)</div>
          <div class="lesson-content">
            <p>Scoped Storage restricts broad access to the filesystem. Apps can only access specific directories and files they create.</p>
            <p style="margin-top:10px;"><strong>Directory Access:</strong></p>
            <ul style="margin-left:20px; margin-top:8px;">
              <li><strong>App-specific:</strong> getExternalFilesDir() - Always accessible</li>
              <li><strong>Downloads:</strong> Requires MANAGE_EXTERNAL_STORAGE</li>
              <li><strong>Media:</strong> Use MediaStore API</li>
              <li><strong>Other apps:</strong> SAF or MANAGE_EXTERNAL_STORAGE</li>
            </ul>
            <div class="code-block">
// App-specific directory (always works)
File appDir = new File(
  getExternalFilesDir(null), 
  "MyFiles"
);

// Shared downloads (needs permission)
File downloadsDir = 
  Environment.getExternalStoragePublicDirectory(
    Environment.DIRECTORY_DOWNLOADS
  );
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    // Tab switching
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const tabId = btn.getAttribute('data-tab');
        document.querySelectorAll('.tab-content').forEach(t => 
          t.classList.remove('active')
        );
        document.querySelectorAll('.tab-btn').forEach(b => 
          b.classList.remove('active')
        );
        document.getElementById(tabId).classList.add('active');
        btn.classList.add('active');
      });
    });
  </script>
</body>
</html>
